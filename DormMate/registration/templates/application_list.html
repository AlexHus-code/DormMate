<!-- templates/application_list.html -->

{% extends 'base.html' %}

{% block content %}
<h1>Список заявок</h1>

<div style="margin-bottom: 20px;">
  <a href="{% url 'application-list' %}?status=all" 
     class="btn {% if current_status == 'all' %}btn-primary{% else %}btn-secondary{% endif %}">Все</a>
  <a href="{% url 'application-list' %}?status=pending" 
     class="btn {% if current_status == 'pending' %}btn-primary{% else %}btn-secondary{% endif %}">В ожидании</a>
  <a href="{% url 'application-list' %}?status=approved" 
     class="btn {% if current_status == 'approved' %}btn-primary{% else %}btn-secondary{% endif %}">Подтверждённые</a>
  <a href="{% url 'application-list' %}?status=rejected" 
     class="btn {% if current_status == 'rejected' %}btn-primary{% else %}btn-secondary{% endif %}">Отклонённые</a>
  
</div>

<table>
  <thead>
    <tr>
      <th>Пользователь</th>
      <th>Номер комнаты</th>
      <th>Дата подачи</th>
      <th>Комментарий</th>
      <th>Статус</th>
      <th>Действия</th>
    </tr>
  </thead>
  <tbody>
    {% for app in applications %}
      <tr>
        <td>{{ app.user.username }}</td>
        <td>{{ app.room_number }}</td>
        <td>{{ app.created_at|date:"d.m.Y H:i" }}</td>
        <td>{{ app.comment|truncatewords:10 }}</td>
        <td>{{ app.get_status_display }}</td>
        <td><a href="{% url 'application-detail' app.pk %}">Просмотреть</a></td>
      </tr>
    {% empty %}
      <tr><td colspan="6">Заявок пока нет</td></tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}

